<div class="container">
    <div class="card shadow-sm p-4 my-4">
        <h2 class="mb-4 text-center">Mein Account</h2>
        <table class="table">
            <tr><td>Benutzername:</td><td>###USERNAME###</td></tr>
            <tr><td>E-Mail:</td><td>###EMAIL###</td></tr>
            <tr><td>2FA:</td><td>###TWOFASTATUS### ###TWOFABTN###</td></tr>
            ###MAILCONFIRM###
        </table>
        <div class="d-flex justify-content-center gap-2 mb-3 flex-wrap">
            <a href='index.php?act=change_pw_page&username=###USERNAME###' class="btn btn-primary">Passwort ändern</a>
            <button class="btn btn-secondary" id="showOwnLocationsBtn" style="display:none;">Eigene Locations bearbeiten</button>
        </div>


        <!-- Eigene Locations -->
        <div id="myLocationsSection" style="display:none;">
            <h3 class="mb-3 mt-4">Meine Locations</h3>
            <a href="index.php?act=set_location_page" class="btn btn-primary mb-3">Neue Lokation Hinzufügen</a>
            <table class="table table-bordered table-striped" id="locationsTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Status</th>
                        <th>Land</th>
                        <th>Stadt</th>
                        <th>Beschreibung</th>
                        <th>Aktionen</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Wird per JS befüllt -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Mini-Map-Popup für Beschreibung -->
<div id="descMapPopup" class="shadow rounded" style="display:none; position:absolute; z-index:9999; background:white; border:1px solid #aaa; min-width:260px; max-width:350px;">
  <div id="descMapHeader" class="fw-bold p-2 border-bottom"></div>
  <div id="descMap" style="height:200px; width:100%;"></div>
</div>

<!-- Modal für große Map -->
<div class="modal fade" id="mapModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <div id="modalLocationInfo" class="fw-bold"></div>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" style="height: 400px;">
        <div id="modalMap" style="height:100%; width:100%;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Beschreibung ändern -->
<div class="modal fade" id="editDescModal" tabindex="-1" aria-labelledby="editDescModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editDescModalLabel">Beschreibung ändern</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="editDescForm">
          <div class="mb-3">
            <label for="currentDescription" class="form-label">Aktuelle Beschreibung</label>
            <input type="text" class="form-control" id="currentDescription" readonly>
          </div>
          <div class="mb-3">
            <label for="newDescription" class="form-label">Neue Beschreibung</label>
            <textarea class="form-control" id="newDescription" required></textarea>
          </div>
          <input type="hidden" id="editLocationId">
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
        <button type="submit" class="btn btn-primary" form="editDescForm">Speichern</button>
      </div>
    </div>
  </div>
</div>
